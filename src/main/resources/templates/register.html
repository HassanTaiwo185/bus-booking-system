<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Register</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light d-flex align-items-center justify-content-center min-vh-100">

<div class="card shadow-lg border-0 p-4" style="width: 100%; max-width: 420px;">

    <h3 class="text-center mb-3 fw-bold">Create Account</h3>
    <p class="text-center text-muted mb-4">Sign up to continue</p>


    <div th:if="${error}" class="alert alert-danger text-center" th:text="${error}"></div>

    <form th:action="@{/api/v1/auth/register}"
          th:object="${register}"
          method="post"
          novalidate
          onsubmit="this.querySelector('button[type=submit]').disabled=true;">

        <!-- First Name -->
        <div class="mb-3">
            <input type="text"
                   class="form-control"
                   placeholder="First Name"
                   th:field="*{firstName}"
            required
            >
            <small class="text-danger"
                   th:if="${#fields.hasErrors('firstName')}"
                   th:errors="*{firstName}"></small>
        </div>

        <!-- Last Name -->
        <div class="mb-3">
            <input type="text"
                   class="form-control"
                   placeholder="Last Name"
                   th:field="*{lastName}"
            required>
            <small class="text-danger"
                   th:if="${#fields.hasErrors('lastName')}"
                   th:errors="*{lastName}"></small>
        </div>

        <!-- Email -->
        <div class="mb-3">
            <input type="email"
                   class="form-control"
                   placeholder="Email address"
                   th:field="*{email}"
            required>
            <small class="text-danger"
                   th:if="${#fields.hasErrors('email')}"
                   th:errors="*{email}"></small>
        </div>

        <!-- Phone -->
        <div class="mb-3">
            <input type="text"
                   class="form-control"
                   placeholder="Phone number"
                   th:field="*{phone}"
            required>
            <small class="text-danger"
                   th:if="${#fields.hasErrors('phone')}"
                   th:errors="*{phone}"></small>
        </div>

        <!-- Role -->
        <div class="mb-3">
            <select class="form-select"
                    th:field="*{role}">
                <option value="">Select role</option>
                <option value="USER">Customer</option>
                <option value="ADMIN">Admin</option>
            </select>
            <small class="text-danger"
                   th:if="${#fields.hasErrors('role')}"
                   th:errors="*{role}"></small>
        </div>

        <!-- Password -->
        <div class="mb-3">
            <input type="password"
                   class="form-control"
                   placeholder="Password"
                   th:field="*{password}">
            <small class="text-danger"
                   th:if="${#fields.hasErrors('password')}"
                   th:errors="*{password}"></small>
        </div>

        <!-- Confirm Password -->
        <div class="mb-4">
            <input type="password"
                   class="form-control"
                   placeholder="Confirm Password"
                   th:field="*{confirmPassword}"
            required>
            <small class="text-danger"
                   th:if="${#fields.hasErrors('confirmPassword')}"
                   th:errors="*{confirmPassword}"></small>
        </div>

        <button type="submit"
                class="btn btn-primary w-100 py-2 fw-semibold"
                onclick="this.disabled=true; this.innerText='Sending...'; this.form.submit();">
            Register
        </button>

        <div class="text-center mt-3">
            <small class="text-muted">
                Already have an account?
                <a th:href="@{/api/v1/auth/login}" class="text-decoration-none">
                    Login
                </a>
            </small>
        </div>
    </form>
</div>

</body>
</html>
